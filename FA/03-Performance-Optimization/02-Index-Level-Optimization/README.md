<div dir="rtl">

# ุจุฎุด ณุ ุฏุฑุณ ฒ: ุจูููโุณุงุฒ ุฏุฑ ุณุทุญ ุงูุฏฺฉุณ (Index-Level Optimization)

ุฏุฑ ุจุฎุด ุทุฑุงุญ ูพุดุฑูุชู ุจุง ููุงูู ูพุงูโุง ุงูุฏฺฉุณโฺฏุฐุงุฑ ุขุดูุง ุดุฏู. ุญุงูุง ูโุฎูุงูู ุงู ุฏุงูุด ุฑุง ุจุง ุฌุฒุฆุงุช ุฏููโุชุฑ ุชฺฉูู ฺฉูู ุชุง ุจุชูุงูู ุงูุฏฺฉุณโูุง ุจุณุงุฒู ฺฉู ูุงููุฏ ฺฉ ฺุงูู ุฌุฑุงุญ ุนูู ูโฺฉููุฏ: ุฏููุ ุณุฑุน ู ฺฉุงุฑุขูุฏ.

ุณู ููููู ฺฉูุฏ ฺฉู ุฏุฑ ุงู ุฏุฑุณ ุงุฏ ูโฺฏุฑูุ ุจู ุดูุง ฺฉูฺฉ ูโฺฉููุฏ ุชุง ุงุฒ ุญุฏุงฺฉุซุฑ ูพุชุงูุณู ุงูุฏฺฉุณโูุง ุจูุฑู ุจุจุฑุฏ.

---

## ฑ. ฺฉุงุฑุฏูุงูุช (Cardinality): ุจูุชุฑู ุฏูุณุช ุดูุง ุฏุฑ ุงูุชุฎุงุจ ุงูุฏฺฉุณ

**ฺฉุงุฑุฏูุงูุช** ุจู ุฒุจุงู ุณุงุฏู ุนู **ุชุนุฏุงุฏ ููุงุฏุฑ ููุญุตุฑุจูโูุฑุฏ** ุฏุฑ ฺฉ ุณุชูู.

* **ฺฉุงุฑุฏูุงูุช ุจุงูุง:** ุณุชูู ูุงููุฏ `email` ุง `username` ฺฉู ุฏุฑ ุขู ุชูุฑุจุงู ูุฑ ุฑุฏู ููุฏุงุฑ ูุชูุงูุช ุฏุงุฑุฏ.
* **ฺฉุงุฑุฏูุงูุช ูพุงู:** ุณุชูู ูุงููุฏ `gender` (ูุฑุฏ - ุฒู) ุง `is_active` (ฐ - ฑ) ฺฉู ุฏุฑ ุขู ููุท ุชุนุฏุงุฏ ฺฉู ููุฏุงุฑ ููุญุตุฑุจูโูุฑุฏ ูุฌูุฏ ุฏุงุฑุฏ.

**ูุงููู ุทูุง ฺฉุงุฑุฏูุงูุช:**
> ุงูุฏฺฉุณโูุง ุฑู ุณุชููโูุง ุจุง **ฺฉุงุฑุฏูุงูุช ุจุงูุง** ุจุณุงุฑ ูุคุซุฑุชุฑ ุนูู ูโฺฉููุฏ.

**ฺุฑุงุ**
ุจู ููุฑุณุช ฺฉุชุงุจ ูฺฉุฑ ฺฉูุฏ. ุงฺฏุฑ ฺฉ ฺฉููู ฺฉูุฏ ุฏุฑ ููุฑุณุชุ ุดูุง ุฑุง ุจู ฑฐฐ ุตูุญู ูุฎุชูู ุงุฑุฌุงุน ุฏูุฏุ ุขู ููุฑุณุช ฺูุฏุงู ููุฏ ูุณุช. ุงูุง ุงฺฏุฑ ุดูุง ุฑุง ุฏููุงู ุจู ฑ ุง ฒ ุตูุญู ูุดุฎุต ูุฏุงุช ฺฉูุฏุ ุจุณุงุฑ ฺฉุงุฑุขูุฏ ุงุณุช.
ุงูุฏฺฉุณ ุฑู ุณุชูู `gender` ูุงููุฏ ูุซุงู ุงูู ุงุณุชุ ุฏุชุงุจุณ ุฑุง ุจู ุจุฎุด ุจุฒุฑฺฏ ุงุฒ ุฌุฏูู (ูุซูุงู ตฐูช ุฑุฏูโูุง) ูุฏุงุช ูโฺฉูุฏ ฺฉู ฺฉูฺฉ ฺูุฏุงู ุจู ููุชุฑ ฺฉุฑุฏู ุฏุงุฏูโูุง ููโฺฉูุฏ. ุงูุง ุงูุฏฺฉุณ ุฑู `email` ุฏููุงู ุฑุฏู ููุฑุฏ ูุธุฑ ุดูุง ุฑุง ูพุฏุง ูโฺฉูุฏ.

**ฺฉุงุฑุจุฑุฏ ุฏุฑ ุงูุฏฺฉุณ ฺูุฏุณุชูู:**
ููฺฏุงู ุณุงุฎุช ฺฉ ุงูุฏฺฉุณ ุชุฑฺฉุจุ ุณุชูู ฺฉู ฺฉุงุฑุฏูุงูุช ุจุงูุงุชุฑ ุฏุงุฑุฏ ุฑุง **ุงูู** ูุฑุงุฑ ุฏูุฏ. ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ MySQL ุจุชูุงูุฏ ุฏุฑ ููุงู ูุฏู ุงููุ ูุฌููุนู ุฏุงุฏู ุฑุง ุจู ุดฺฉู ฺุดูฺฏุฑ ฺฉูฺฺฉ ฺฉูุฏ.

ุจู ุนููุงู ูุซุงู `INDEX(user_id, status)` **ูุนูููุงู** ุจูุชุฑ ุงุฒ `INDEX(status, user_id)` ุงุณุช.

---

## ฒ. ุงูุฏฺฉุณ ูพูุดุด (Covering Index): ุงูุฌ ุจูููโุณุงุฒ

ุงู ููููู ุฑุง ุฏุฑ ุฏุฑุณ ูุจู ูุนุฑู ฺฉุฑุฏูุ ุงูุง ุจู ุฏูู ุงููุช ูููโุงูุนุงุฏูโุงุดุ ุงูุฌุง ุขู ุฑุง ุนููโุชุฑ ุจุฑุฑุณ ูโฺฉูู.

ฺฉ **ุงูุฏฺฉุณ ูพูุดุด**ุ ุงูุฏฺฉุณ ุงุณุช ฺฉู ุชูุงู ุณุชููโูุง ููุฑุฏ ูุงุฒ ฺฉ ฺฉูุฆุฑ ุฑุง ุฏุฑ ุฎูุฏ ุฏุงุฑุฏ. ุงู ุนู MySQL ูโุชูุงูุฏ ุจู ฺฉูุฆุฑ ุดูุง **ููุท ุจุง ุฎูุงูุฏู ุฎูุฏ ุงูุฏฺฉุณ** ูพุงุณุฎ ุฏูุฏ ู **ูฺ ูุงุฒ ุจู ูุฑุงุฌุนู ุจู ุฌุฏูู ุงุตู ูุฏุงุฑุฏ**.



**ูุซุงู:**
ูุฑุถ ฺฉูุฏ ฺฉูุฆุฑ ูพุฑุชฺฉุฑุงุฑ ุฒุฑ ุฑุง ุฏุฑ ุณุณุชู ุฎูุฏ ุฏุงุฑุฏ:
<div dir="ltr">

```sql
SELECT sender_id, recipient_id, sent_at FROM messages WHERE conversation_id = 123;
```
</div>

ุจุฑุง ุจูููโุณุงุฒ ุงู ฺฉูุฆุฑุ ุดูุง ฺฉ ุงูุฏฺฉุณ ูพูุดุด ุจู ุดฺฉู ุฒุฑ ูโุณุงุฒุฏ:
<div dir="ltr">

```sql
CREATE INDEX idx_conversation_cover ON messages (conversation_id, sender_id, recipient_id, sent_at);
```
</div>

**ุชุญูู ุงูุฏฺฉุณ:**
* ุณุชูู `conversation_id`: ุงููู ุณุชูู ุงุณุช ฺูู ุฏุฑ `WHERE` ูุฑุงุฑ ุฏุงุฑุฏ ู ุฏุงุฏูโูุง ุฑุง ููุชุฑ ูโฺฉูุฏ.
* ุณุชูู ูุง `sender_id`, `recipient_id`, `sent_at`: ุงู ุณุชููโูุง ุจู ุงูุฏฺฉุณ ุงุถุงูู ุดุฏูโุงูุฏ ุชุง ุจุฎุด `SELECT` ุฑุง ูพูุดุด ุฏููุฏ.

ุญุงูุง ููุช ุงู ฺฉูุฆุฑ ุงุฌุฑุง ูโุดูุฏุ MySQL ุชูุงู ุงุทูุงุนุงุช ููุฑุฏ ูุงุฒุด ุฑุง ุงุฒ ุงูุฏฺฉุณ `idx_conversation_cover` ูโุฎูุงูุฏ ู ูุฑฺฏุฒ ุจู ุฌุฏูู ุจุฒุฑฺฏ `messages` ูุฑุงุฌุนู ููโฺฉูุฏ. ุงู ฺฉุงุฑ ุจู ุฎุตูุต ุฏุฑ ุฌุฏุงูู ุจุง ููููโูุง ุฑฺฉูุฑุฏุ ุชูุงูุช ุณุฑุนุช ูููโุงูุนุงุฏูโุง ุงุฌุงุฏ ูโฺฉูุฏ.

---

## ณ. ูพุดููุฏ ุงูุฏฺฉุณ (Index Prefixes): ุจูููโุณุงุฒ ุจุฑุง ุณุชููโูุง ูุชู ุจุฒุฑฺฏ

ฺู ุงุชูุงู ูโุงูุชุฏ ููุช ุจุฎูุงูุฏ ุฑู ฺฉ ุณุชูู `VARCHAR(500)` ุง `TEXT` ุงูุฏฺฉุณ ุจุณุงุฒุฏุ ุณุงุฎุช ุงูุฏฺฉุณ ุฑู ฺฉู ุงู ุณุชููโูุง ูุถุง ุจุณุงุฑ ุฒุงุฏ ุฑุง ุงุดุบุงู ูโฺฉูุฏ ู ูโุชูุงูุฏ ุฎูุฏ ุงูุฏฺฉุณ ุฑุง ฺฉูุฏ ฺฉูุฏ.

**ุฑุงูโุญู: ูพุดููุฏ ุงูุฏฺฉุณ**
ุดูุง ูโุชูุงูุฏ ุจู MySQL ุจฺฏูุฏ ฺฉู ููุท ุฑู **ฺูุฏ ฺฉุงุฑุงฺฉุชุฑ ุงูู** ฺฉ ุณุชูู ูุชู ุงูุฏฺฉุณ ุจุณุงุฒุฏ.

<div dir="ltr">

```sql
CREATE INDEX idx_url_prefix ON logs (url(255));
```
</div>

ุฏุฑ ุงู ูุซุงูุ ูุง ููุท ุฑู ฒตต ฺฉุงุฑุงฺฉุชุฑ ุงูู ุณุชูู `url` ุงูุฏฺฉุณ ุณุงุฎุชูโุงู.

**ฺฺฏููู ุทูู ูพุดููุฏ ุฑุง ุงูุชุฎุงุจ ฺฉููุ**
ูุฏู ุงู ุงุณุช ฺฉู ูพุดููุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ ฺฉู ุจู ุงูุฏุงุฒู ฺฉุงู ุจููุฏ ุจุงุดุฏ ุชุง ุจุดุชุฑ ููุงุฏุฑ ุฑุง ุงุฒ ูู ูุชูุงุฒ ฺฉูุฏุ ุงูุง ูู ุขููุฏุฑ ุจููุฏ ฺฉู ูุถุง ุฑุง ูุฏุฑ ุฏูุฏ. ูโุชูุงูุฏ ุจุง ฺฉูุฆุฑ ุฒุฑุ ูุฒุงู "ฺฉุชุง ุจูุฏู" ูพุดููุฏูุง ุจุง ุทูู ูุฎุชูู ุฑุง ุจุณูุฌุฏ:

<div dir="ltr">

```sql
SELECT
  COUNT(DISTINCT LEFT(column_name, 10)) / COUNT(*) AS selectivity_10,
  COUNT(DISTINCT LEFT(column_name, 20)) / COUNT(*) AS selectivity_20,
  COUNT(DISTINCT LEFT(column_name, 50)) / COUNT(*) AS selectivity_50
FROM your_table;
```
</div>

ูุฑ ฺู ุนุฏุฏ ุจู ุฏุณุช ุขูุฏู (ฺฉู ุจู ฐ ู ฑ ุงุณุช) ุจู ฑ ูุฒุฏฺฉโุชุฑ ุจุงุดุฏุ ุขู ุทูู ูพุดููุฏ ุจุฑุง ุงูุฏฺฉุณ ุดูุง ููุงุณุจโุชุฑ ุงุณุช.

**ูฺฉุชู ููู:** ูพุดููุฏ ุงูุฏฺฉุณ ููโุชูุงูุฏ ุจุฑุง `ORDER BY` ุง ุจู ุนููุงู ฺฉ ุงูุฏฺฉุณ ูพูุดุด ฺฉุงูู ุงุณุชูุงุฏู ุดูุฏุ ฺูู ฺฉู ููุฏุงุฑ ุณุชูู ุฏุฑ ุงูุฏฺฉุณ ูุฌูุฏ ูุฏุงุฑุฏ.

---
[โฉ ุฏุฑุณ ูุจู: ุชุญูู ุจุง EXPLAIN](../01-Explain-Plan/README.md) | [๐ผ ุจุงุฒฺฏุดุช ุจู ููุฑุณุช ูุตู](../README.md) | [๐ ูุดุงูุฏู ููููู ฺฉุฏ](examples.sql) | [ุฏุฑุณ ุจุนุฏ: ุจูููโุณุงุฒ ฺฉูุฆุฑ โช](../03-Query-Level-Optimization/README.md)

</div>