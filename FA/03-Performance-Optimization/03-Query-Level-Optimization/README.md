<div dir="rtl">

# ุจุฎุด ณุ ุฏุฑุณ ณ: ุจูููโุณุงุฒ ุฏุฑ ุณุทุญ ฺฉูุฆุฑ (Query-Level Optimization)

ุญุช ุจุง ูุฌูุฏ ุจูุชุฑู ุงูุฏฺฉุณโูุงุ ฺฉ ฺฉูุฆุฑ ุจุฏ ููุดุชู ุดุฏู ูโุชูุงูุฏ ุชูุงู ุชูุงุดโูุง ุดูุง ุฑุง ุจโุงุซุฑ ฺฉูุฏ. ุจูููโุณุงุฒ ุฏุฑ ุณุทุญ ฺฉูุฆุฑุ ุนู ููุดุชู SQL ุจู ุดฺฉู ฺฉู ุจู ุจูููโุณุงุฒ (Optimizer) MySQL ฺฉูฺฉ ฺฉูุฏ ุชุง ุจูุชุฑู ู ุณุฑุนโุชุฑู ุฑุงู ุฑุง ุจุฑุง ุฏุณุชุฑุณ ุจู ุฏุงุฏูโูุง ูพุฏุง ฺฉูุฏ.

ุงู ฺฉุงุฑ ูุงููุฏ ุฏุงุฏู ุฏุณุชูุฑุงูุนูู ูุงุถุญ ุจู ฺฉ ฺฉุชุงุจุฏุงุฑ ูุงูุฑ ุงุณุช. ฺฉุชุงุจุฎุงูู (ุงูุฏฺฉุณโูุง) ุดูุง ุนุงู ุงุณุชุ ุงูุง ุฏุณุชูุฑุงูุนูู (ฺฉูุฆุฑ) ุดูุง ูู ุจุงุฏ ุฏูู ุจุงุดุฏ.

---

## โ๏ธ ุถุฏุงูฺฏููุง ุฑุงุฌ (Anti-Patterns) ฺฉู ุจุงุฏ ุงุฒ ุขูโูุง ุงุฌุชูุงุจ ฺฉูุฏ

### ฑ. ุงุณุชูุงุฏู ุงุฒ `* SELECT`
ุงู ุงููู ู ุฑุงุฌโุชุฑู ุงุดุชุจุงู ุงุณุช. ููุดู ููุท ุณุชููโูุง ุฑุง ฺฉู ูุงุฒ ุฏุงุฑุฏุ ุตุฑุญุงู ูุงู ุจุจุฑุฏ.

**ฺุฑุง `* SELECT` ุจุฏ ุงุณุชุ**
* **ุชุฑุงูฺฉ ุดุจฺฉู ู I/O ุบุฑุถุฑูุฑ:** ุดูุง ุฏุงุฏูโูุง ุฑุง ุงุฒ ุฏุชุงุจุณ ุจู ุงูพูฺฉุดู ุฎูุฏ ููุชูู ูโฺฉูุฏ ฺฉู ุจู ุขูโูุง ูุงุฒ ูุฏุงุฑุฏ.
* **ุงุฒ ฺฉุงุฑ ุงูุฏุงุฎุชู ุงูุฏฺฉุณ ูพูุดุด (Covering Index):** ุงู ูููโุชุฑู ุฏูู ุงุณุช. ูุฑุถ ฺฉูุฏ ุดูุง ฺฉ ุงูุฏฺฉุณ ูพูุดุด ุนุงู ุฑู `(status, created_at)` ุณุงุฎุชูโุงุฏ ุชุง ฺฉูุฆุฑ `'SELECT created_at FROM posts WHERE status = 'published` ุฑุง ุจููู ฺฉูุฏ. ุจู ูุญุถ ุงูฺฉู ุงุฒ `* SELECT` ุงุณุชูุงุฏู ฺฉูุฏุ MySQL ูุฌุจูุฑ ูโุดูุฏ ุจุฑุง ุฎูุงูุฏู ุชูุงู ุณุชููโูุง ุฏฺฏุฑ ุจู ุฌุฏูู ุงุตู ูุฑุงุฌุนู ฺฉูุฏ ู ฺฉู ูุฒุช ุงูุฏฺฉุณ ูพูุดุด ุงุฒ ุจู ูโุฑูุฏ.

### ฒ. ุงุณุชูุงุฏู ุงุฒ ุชูุงุจุน ุฑู ุณุชููโูุง ุงูุฏฺฉุณโุดุฏู ุฏุฑ `WHERE`
ุงู ฺฉ ูุงุชู ุนููฺฉุฑุฏ ุงุณุช. ููุช ุดูุง ุชุงุจุน ุฑุง ุฑู ฺฉ ุณุชูู ุฏุฑ ุดุฑุท `WHERE` ุงุนูุงู ูโฺฉูุฏุ MySQL ุฏฺฏุฑ **ููโุชูุงูุฏ ุงุฒ ุงูุฏฺฉุณ** ุขู ุณุชูู ุงุณุชูุงุฏู ฺฉูุฏ.

**โ ูุซุงู ุจุฏ:**
<div dir="ltr">

```sql
--comment: ุงุณุชูุงุฏู ูุฎูุงูุฏ ฺฉุฑุฏ `created_at` ุงู ฺฉูุฆุฑ ูุฑฺฏุฒ ุงุฒ ุงูุฏฺฉุณ ุฑู 
SELECT * FROM orders WHERE YEAR(created_at) = 2025;
```
</div>

ฺูู MySQL ุจุฑุง ุงุฌุฑุง ุงู ฺฉูุฆุฑ ุจุงุฏ ุชุงุจุน `()YEAR` ุฑุง ุฑู **ุชูุงู ุฑุฏูโูุง ุฌุฏูู** ุงุฌุฑุง ฺฉูุฏ ุชุง ุจุชูุงูุฏ ุขูโูุง ุฑุง ุจุง ุณุงู ฒฐฒต ููุงุณู ฺฉูุฏ.

**โ ูุซุงู ุฎูุจ (SARGable Query):**
ฺฉูุฆุฑ ุฑุง ุทูุฑ ุจุงุฒููุณ ฺฉูุฏ ฺฉู ุณุชูู ุงูุฏฺฉุณโุดุฏู ุจู ุชููุง ุฏุฑ ฺฉ ุณูุช ูุนุงุฏูู ุจุงุดุฏ.
<div dir="ltr">

```sql
--comment: ุงุณุชูุงุฏู ูโฺฉูุฏ range ุจุฑุง ฺฉ ุฌุณุชุฌู `created_at` ุงู ฺฉูุฆุฑ ุงุฒ ุงูุฏฺฉุณ
SELECT * FROM orders WHERE created_at >= '2025-01-01' AND created_at < '2026-01-01';
```
</div>

### ณ. ุงุณุชูุงุฏู ุงุฒ `LIKE` ุจุง `%` ุฏุฑ ุงุจุชุฏุง
ุงูุฏฺฉุณโูุง ูุงููุฏ ุฏูุชุฑฺู ุชููู ูุฑุชุจ ูุณุชูุฏ. ุดูุง ูโุชูุงูุฏ ุจู ุณุฑุนุช ุชูุงู ูุงูโูุง ฺฉู ุจุง "A" ุดุฑูุน ูโุดููุฏ ุฑุง ูพุฏุง ฺฉูุฏุ ุงูุง ููโุชูุงูุฏ ูุงูโูุง ฺฉู ุจู "a" ุฎุชู ูโุดููุฏ ุฑุง ุจุฏูู ูุฑู ุฒุฏู ฺฉู ุฏูุชุฑฺู ูพุฏุง ฺฉูุฏ.


* ุดุฑุท `'%WHERE name LIKE 'Ali` **ูโุชูุงูุฏ** ุงุฒ ุงูุฏฺฉุณ ุงุณุชูุงุฏู ฺฉูุฏ.
* ุดุฑุท `'WHERE name LIKE '%Ali` **ููโุชูุงูุฏ** ุงุฒ ุงูุฏฺฉุณ ุงุณุชูุงุฏู ฺฉูุฏ ู ููุฌุฑ ุจู Full Table Scan ูโุดูุฏ.

**ุฑุงูโุญู ฺุณุชุ** ุจุฑุง ุฌุณุชุฌููุง ูพฺุฏู ูุชูุ ุจุงุฏ ุงุฒ ุงุจุฒุงุฑ ููุงุณุจ ุขู ุนู **Full-Text Search** ุงุณุชูุงุฏู ฺฉุฑุฏ ฺฉู ุฏุฑ ุขูุฏู ุจู ุขู ุฎูุงูู ูพุฑุฏุงุฎุช.

---

## ๐ ุชฺฉูฺฉโูุง ููุดุชู ฺฉูุฆุฑโูุง ฺฉุงุฑุขูุฏ

### ฑ. ุตูุญูโุจูุฏ (Pagination) ุจููู ุจุง Keyset Pagination
ุตูุญูโุจูุฏ ุจุง `OFFSET` ุฏุฑ ุตูุญุงุช ุจุงูุง ุจุณุงุฑ ฺฉูุฏ ูโุดูุฏ. ฺฉูุฆุฑ `LIMIT 10 OFFSET 1000000` ุจู ุงู ูุนูุงุณุช ฺฉู "ฑ,ฐฐฐ,ฐฑฐ ุฑุฏู ุฑุง ูพุฏุง ฺฉูุ ฺฉ ูููู ุฑุฏู ุงูู ุฑุง ุฏูุฑ ุจุฑุฒ ู ฑฐ ุฑุฏู ุจุนุฏ ุฑุง ุจู ูู ุจุฏู". ุงู ูุฑุขูุฏ ุจุง ุงูุฒุงุด `OFFSET` ุจู ุดุฏุช ฺฉูุฏ ูโุดูุฏ.

**ุฑุงูโุญู: Keyset Pagination (ุง Seek Method)**
ุจู ุฌุง ุดูุงุฑู ุตูุญูุ ุดูุง `id` (ุง ูุฑ ุณุชูู ูุฑุชุจโุดุฏู ุฏฺฏุฑ) ุขุฎุฑู ุฑุฏู ุฏุฏูโุดุฏู ุฏุฑ ุตูุญู ูุจู ุฑุง ุจู ฺฉูุฆุฑ ุจุนุฏ ูโุฏูุฏ.

**โ ุฑูุด ฺฉูุฏ:**
<div dir="ltr">

```sql
--comment: ุฑูุชู ุจู ุตูุญู ฒ
SELECT * FROM posts ORDER BY id LIMIT 10 OFFSET 10;
```
</div>

**โ ุฑูุด ุณุฑุน:**
<div dir="ltr">

```sql
--comment: ูุฑุถ ฺฉูุฏ ุขุฎุฑู ุข ุฏ ุฏุฑ ุตูุญู ุงููุ ฑฐ ุจูุฏู ุงุณุช
SELECT * FROM posts WHERE id > 10 ORDER BY id LIMIT 10;
```
</div>

ุงู ุฑูุด ููุดู ุณุฑุน ุงุณุชุ ููู ูุณุช ฺูุฏุฑ ุฏุฑ ุตูุญุงุช ุจู ุฌูู ุจุฑูุฏ.

### ฒ. ุงุณุชูุงุฏู ุงุฒ `UNION ALL` ุจู ุฌุง `UNION`
ูุฑ ุฏู ุฏุณุชูุฑ ูุชุงุฌ ุฏู ฺฉูุฆุฑ ุฑุง ุจุง ูู ุชุฑฺฉุจ ูโฺฉููุฏุ ุงูุง ุจุง ฺฉ ุชูุงูุช ุจุฒุฑฺฏ:
* ุฏุณุชูุฑ `UNION`: ูุชุงุฌ ุฑุง ุชุฑฺฉุจ ฺฉุฑุฏู ู ุณูพุณ ฺฉ ุนููุงุช ุณูฺฏู ุจุฑุง **ุญุฐู ุฑุฏูโูุง ุชฺฉุฑุงุฑ** ุงูุฌุงู ูโุฏูุฏ.
* ุฏุณุชูุฑ `UNION ALL`: ููุท ูุชุงุฌ ุฑุง ุจู ูู ูโฺุณุจุงูุฏ ู ูฺ ุจุฑุฑุณ ุจุฑุง ุชฺฉุฑุงุฑ ุจูุฏู ุงูุฌุงู ููโุฏูุฏ.

> **ูุงููู ุทูุง:** ุงฺฏุฑ ูโุฏุงูุฏ ฺฉู ูุชุงุฌ ุดูุง ุชฺฉุฑุงุฑ ูุฏุงุฑูุฏ ุง ูุฌูุฏ ุชฺฉุฑุงุฑ ุจุฑุงุชุงู ุงููุช ูุฏุงุฑุฏุ **ููุดู** ุงุฒ `UNION ALL` ุงุณุชูุงุฏู ฺฉูุฏ. ุจุณุงุฑ ุณุฑุนโุชุฑ ุงุณุช.

---
[โฉ ุฏุฑุณ ูุจู: ุจูููโุณุงุฒ ุงูุฏฺฉุณ](../02-Index-Level-Optimization/README.md) | [๐ผ ุจุงุฒฺฏุดุช ุจู ููุฑุณุช ูุตู](../README.md) | [๐ ูุดุงูุฏู ููููู ฺฉุฏ](examples.sql) | [ุฏุฑุณ ุจุนุฏ: ุจูููโุณุงุฒ ูุนูุงุฑ โช](../04-Architecture-Level-Optimization/README.md)

</div>