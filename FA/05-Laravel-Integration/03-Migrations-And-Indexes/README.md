<div dir="rtl">

# ุจุฎุด ตุ ุฏุฑุณ ณ: ฺฉุงุฑ ุจุง ุงูุฏฺฉุณโูุง ู Migration ูุง

ูุงฺฏุฑุดู ูุง ูุงุฑุงูู ุงุจุฒุงุฑ ูููโุงูุนุงุฏู ุจุฑุง ูุฏุฑุช ุณุงุฎุชุงุฑ ุฏุชุงุจุณ ุดูุง ุจู ุตูุฑุช ฺฉุฏ ูุณุชูุฏ. ุงู ุฑูฺฉุฑุฏ (ฺฉู ุจู ุขู Infrastructure as Code ูโฺฏููุฏ) ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ุชูุงู ุชุบุฑุงุช ุฏุชุงุจุณ ุฑุง ูุณุฎูโุจูุฏ ฺฉุฑุฏูุ ุจุง ุชู ุฎูุฏ ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑุฏ ู ูุฑุขูุฏ ุงุณุชูุฑุงุฑ (Deployment) ุฑุง ุฎูุฏฺฉุงุฑ ู ูุงุจู ุงุนุชูุงุฏ ฺฉูุฏ.

ุฏุงูุณุชู ฺฺฏููฺฏ ุชุนุฑู ุตุญุญ ุงูุฏฺฉุณโูุง ู ุฑูุงุจุท ุฏุฑ ููุงู ุงุจุชุฏุง ฺฉุงุฑุ ุดูุง ุฑุง ุงุฒ ูุดฺฉูุงุช ุนููฺฉุฑุฏ ุฏุฑ ุขูุฏู ูุฌุงุช ูโุฏูุฏ.

---

### ## ุชุนุฑู ุงููุงุน ุงูุฏฺฉุณ ุฏุฑ Migration ูุง

ุดูุง ูโุชูุงูุฏ ุงููุงุน ูุฎุชูู ุงูุฏฺฉุณ ุฑุง ูุณุชููุงู ุฏุฑ ูุชุฏ `()up` ูุงู Migration ุฎูุฏ ุชุนุฑู ฺฉูุฏ.

#### ฺฉูุฏ ุงุตู (Primary Key) ู ุฎุงุฑุฌ (Foreign Key)

* **ฺฉูุฏ ุงุตู:** ูุชุฏ `()id` ุง `bigIncrements('id')` ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ฺฉ ุณุชูู ฺฉูุฏ ุงุตู ุงุฒ ููุน `BIGINT UNSIGNED AUTO_INCREMENT` ุจู ููุฑุงู ุงูุฏฺฉุณ `PRIMARY` ูโุณุงุฒุฏ.
* **ฺฉูุฏ ุฎุงุฑุฌ:** ุจูุชุฑู ู ูุฏุฑูโุชุฑู ุฑูุด ุฏุฑ ูุงุฑุงููุ ุงุณุชูุงุฏู ุงุฒ ูุชุฏ `()foreignId` ุจู ููุฑุงู `()constrained` ุงุณุช.
<div dir="ltr">

```php
Schema::create('posts', function (Blueprint $table) {
    $table->id(); // ฺฉูุฏ ุงุตู
    $table->foreignId('user_id')->constrained()->onDelete('cascade');
    // ...
});
```
</div>

ูุชุฏ `onDelete('cascade')` ุจู ุฏุชุงุจุณ ูโฺฏูุฏ ฺฉู ุงฺฏุฑ ฺฉ ฺฉุงุฑุจุฑ ุญุฐู ุดุฏุ ุชูุงู ูพุณุชโูุง ูุฑุชุจุท ุจุง ุงู ูุฒ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุญุฐู ุดููุฏ.

#### ุงูุฏฺฉุณ ุณุงุฏู ู ฺฉุชุง (Simple & Unique Index)

* **ุงูุฏฺฉุณ ุณุงุฏู (`()index`):** ุจุฑุง ุณุฑุนุช ุจุฎุดุฏู ุจู ุฌุณุชุฌู ุฑู ุณุชููโูุง ฺฉู ุฒุงุฏ ุฏุฑ ุดุฑุท `WHERE` ุงุณุชูุงุฏู ูโุดููุฏ.
* **ุงูุฏฺฉุณ ฺฉุชุง (`()unique`):** ูู ุณุฑุนุช ุฌุณุชุฌู ุฑุง ุจุงูุง ูโุจุฑุฏ ู ูู ุชุถูู ูโฺฉูุฏ ฺฉู ูฺ ุฏู ุฑุฏู ุฏุฑ ุงู ุณุชูู ููุฏุงุฑ ฺฉุณุงู ูุฏุงุดุชู ุจุงุดูุฏ.
<div dir="ltr">

```php
Schema::create('posts', function (Blueprint $table) {
    // ...
    $table->string('slug')->unique(); // ุชุถูู ูโฺฉูุฏ ูุฑ ูพุณุช ฺฉ ูุงูฺฉ ฺฉุชุง ุฏุงุฑุฏ
    $table->string('status')->index(); // ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ูุถุนุช ุฑุง ุณุฑุนโุชุฑ ูโฺฉูุฏ
    // ...
});
```
</div>

#### ุงูุฏฺฉุณ ฺูุฏุณุชูู (Composite Index)

ููุงูุทูุฑ ฺฉู ุฏุฑ ุจุฎุดโูุง ูุจู ุงุฏ ฺฏุฑูุชูุ ุงูุฏฺฉุณโูุง ฺูุฏุณุชูู ุจุฑุง ุจูููโุณุงุฒ ฺฉูุฆุฑโูุง ูพฺุฏู ุจุง ฺูุฏู ุดุฑุท `WHERE` ุง `ORDER BY` ุญุงุช ูุณุชูุฏ.

<div dir="ltr">

```php
Schema::create('posts', function (Blueprint $table) {
    // ...
    $table->string('status');
    $table->timestamp('published_at')->nullable();

    // ุณุงุฎุช ฺฉ ุงูุฏฺฉุณ ุชุฑฺฉุจ ุจุฑุง ฺฉูุฆุฑโูุง ฺฉู ูู ุจุฑ ุงุณุงุณ ูุถุนุช ู ูู ุฒูุงู ุงูุชุดุงุฑ ููุชุฑ ูโฺฉููุฏ
    $table->index(['status', 'published_at']);
});
```
</div>

---

### ## ูุงูโฺฏุฐุงุฑ ู ุญุฐู ุงูุฏฺฉุณโูุง

ูุชุฏ `()down` ุฏุฑ ฺฉ Migration ุจุงุฏ ุชูุงู ฺฉุงุฑูุง ฺฉู ูุชุฏ `()up` ุงูุฌุงู ุฏุงุฏู ุฑุง ุจุฑุนฺฉุณ ฺฉูุฏ. ุจุฑุง ุญุฐู ุงูุฏฺฉุณโูุง ู ฺฉูุฏูุง ุฎุงุฑุฌุ ุดูุง ุจู ูุงู ุขูโูุง ูุงุฒ ุฏุงุฑุฏ. ูุงุฑุงูู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ฺฉ ูุงู ุจุฑุง ุงูุฏฺฉุณโูุง ุชููุฏ ูโฺฉูุฏุ ุงูุง **ุจูุชุฑู ุฑูุดุ ูุงูโฺฏุฐุงุฑ ุตุฑุญ ุงูุฏฺฉุณโูุง ููู ุงุณุช.** ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ ฺฉุฏ ุดูุง ุฎูุงูุงุชุฑ ู ูุงุจู ูฺฏูุฏุงุฑโุชุฑ ุจุงุดุฏ.

**ูุซุงู ฺฉุงูู ุจุง ูุงูโฺฏุฐุงุฑ:**
<div dir="ltr">

```php
public function up()
{
    Schema::table('posts', function (Blueprint $table) {
        $table->unique('slug', 'posts_slug_unique'); // ูุงูโฺฏุฐุงุฑ ุงูุฏฺฉุณ ฺฉุชุง
        $table->index(['status', 'published_at'], 'posts_status_published_at_index'); // ูุงูโฺฏุฐุงุฑ ุงูุฏฺฉุณ ุชุฑฺฉุจ
    });
}

public function down()
{
    Schema::table('posts', function (Blueprint $table) {
        $table->dropUnique('posts_slug_unique');
        $table->dropIndex('posts_status_published_at_index');
    });
}
```
</div>

---
[โฉ ุฏุฑุณ ูุจู: Query Builder ู Raw Expressions](../02-Query-Builder-And-Raw/README.md) | [๐ผ ุจุงุฒฺฏุดุช ุจู ููุฑุณุช ูุตู](../README.md) | [๐ ูุดุงูุฏู ููููู ฺฉุฏ](examples/CreatePostsTableMigration.php) | [ุฏุฑุณ ุจุนุฏ: ุงุจุฒุงุฑูุง ุฏุจุงฺฏ โช](../04-Debugging-Tools/README.md)

</div>
