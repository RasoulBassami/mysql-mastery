<div dir="rtl">

# ุจุฎุด ถุ ุฏุฑุณ ด: ุฏุฑฺฉ ูุดฺฉู EAV ุฏุฑ ุฌุฏูู `wp_postmeta`

ููุงูุทูุฑ ฺฉู ุฏุฑ ุฏุฑุณ ุงูู ุฏุฏูุ ุฌุฏูู `wp_postmeta` ุจุฑุง ุฐุฎุฑู ุงุทูุงุนุงุช ุงุถุงู (Metadata) ูพุณุชโูุง ุจู ฺฉุงุฑ ูโุฑูุฏ. ุงู ุฌุฏูู ุงุฒ ฺฉ ุงูฺฏู ุทุฑุงุญ ุจู ูุงู **EAV (Entity-Attribute-Value)** ุงุณุชูุงุฏู ูโฺฉูุฏ ฺฉู ุจู ุขู ุงูุนุทุงูโูพุฐุฑ ูููโุงูุนุงุฏูโุง ูโุฏูุฏ ุงูุง ูุฒููโ ุนููฺฉุฑุฏ ุณูฺฏู ุฏุงุฑุฏ.

### ## ุงูฺฏู EAV ฺุณุชุ
ุงูฺฏู EAV ุฑุงู ุจุฑุง ุฐุฎุฑู ุฏุงุฏูโูุง ุฏุฑ ุณู ุณุชูู ุงุณุช:
* **ููุฌูุฏุช (Entity):** ุดูุงุณู ูพุณุช ฺฉู ุงู ุฏุงุฏู ุจู ุขู ุชุนูู ุฏุงุฑุฏ (`post_id`).
* **ุตูุช (Attribute):** ูุงู ุฏุงุฏู ุง ฺฉูุฏ ุขู (`meta_key`). ูุซูุงู `price_`.
* **ููุฏุงุฑ (Value):** ููุฏุงุฑ ูุงูุน ุฏุงุฏู (`meta_value`). ูุซูุงู `99.99`.

**ุขูุงููฺ:** `wp_postmeta` ูุงููุฏ ฺฉ ฺฉูุฏ ุจุงฺฏุงู ุจุฒุฑฺฏ ุงุณุช. ูุฑ ฺฉุดู (`post_id`) ูุชุนูู ุจู ฺฉ ูพุณุช ุงุณุช. ุฏุงุฎู ูุฑ ฺฉุดูุ ูพูุดูโูุง ุจุง ุจุฑฺุณุจโูุง ูุฎุชูู (`meta_key`) ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ูุฑ ฺฉุฏุงู ุญุงู ฺฉ ุจุฑฺฏูโ ุงุทูุงุนุงุช (`meta_value`) ูุณุชูุฏ.

### ## ูุดฺฉู ฺฉุฌุงุณุชุ ฺุฑุง EAV ฺฉูุฏ ุงุณุชุ
ุงู ูุฏู ุจุฑุง *ุฐุฎุฑู* ู *ุจุงุฒุงุจ* ูุชุงุฏุชุง ฺฉ ูพุณุช ุฎุงุต ุนุงู ุงุณุช. ุงูุง ุฒูุงู ฺฉู ูโุฎูุงูุฏ ูพุณุชโูุง ุฑุง ุจุฑ ุงุณุงุณ ููุงุฏุฑ ูุชุง ุขูโูุง **ููุชุฑ ุง ูุฑุชุจ ฺฉูุฏ**ุ ูุงุฌุนู ุดุฑูุน ูโุดูุฏ.

**ุณูุงุฑู ูุงูุน:** ูุฑุถ ฺฉูุฏ ุฏุฑ ฺฉ ุณุงุช ููฺฉุงูุฑุณ ูโุฎูุงูุฏ "ุชูุงู ูุญุตููุงุช ฺฉู ููุฌูุฏ ุขูโูุง (`stock_status_`) ุจุฑุงุจุฑ `instock` ุงุณุช ู ููุชุดุงู (`price_`) ุจู ตฐ ุชุง ฑฐฐ ุฏูุงุฑ ุงุณุช" ุฑุง ูพุฏุง ฺฉูุฏ.

ุจุฑุง ุงุฌุฑุง ุงู ฺฉูุฆุฑุ ุฏุชุงุจุณ ุจุงุฏ:
1.  ุฌุฏูู `wp_posts` ุฑุง ุจู `wp_postmeta` **ฺฉ ุจุงุฑ** `JOIN` ฺฉูุฏ ุชุง ุฑุฏู ูุฑุจูุท ุจู `stock_status_` ุฑุง ูพุฏุง ฺฉูุฏ.
2.  ุฌุฏูู `wp_posts` ุฑุง ุจู `wp_postmeta` **ฺฉ ุจุงุฑ ุฏฺฏุฑ** `JOIN` ฺฉูุฏ ุชุง ุฑุฏู ูุฑุจูุท ุจู `price_` ุฑุง ูพุฏุง ฺฉูุฏ.
3.  ุงู `JOIN` ูุง ุฑู ฺฉ ุฌุฏูู ุจุณุงุฑ ุจุฒุฑฺฏ (ุงุบูุจ ููููโูุง ุฑุฏู) ุงูุฌุงู ูโุดูุฏ.
4.  ู ุจุฏุชุฑ ุงุฒ ูููุ ุณุชูู `meta_value` ุงุฒ ููุน `TEXT` ุง `VARCHAR` ุงุณุช. ุงู ุนู ุฏุชุงุจุณ ูุฌุจูุฑ ุงุณุช ููุชโูุง (ฺฉู ุนุฏุฏ ูุณุชูุฏ) ุฑุง ุจู ุนููุงู **ุฑุดุชู ูุชู** ููุงุณู ฺฉูุฏ ฺฉู ุจุณุงุฑ ูุงฺฉุงุฑุขูุฏ ุงุณุช ู ุงุณุชูุงุฏู ุตุญุญ ุงุฒ ุงูุฏฺฉุณ ุฑุง ูุฎุชู ูโฺฉูุฏ.

ูุชุฌู ฺฉ ฺฉูุฆุฑ ุจุณุงุฑ ูพฺุฏู ู ฺฉูุฏ ุงุณุช ฺฉู ุจุง ุงูุฒุงุด ุชุนุฏุงุฏ ูุญุตููุงุชุ ุณุงุช ุดูุง ุฑุง ููุฌ ูโฺฉูุฏ.

---

### ## ุฑุงูโุญูโูุง

#### ุฑุงูโุญู ฑ: ุงุณุชูุงุฏู ุตุญุญ ุงุฒ `meta_query` ุฏุฑ `WP_Query`
ูุฑุฏูพุฑุณ ุจุฑุง ุณุงุฏูโุณุงุฒ ุงู ฺฉูุฆุฑโูุง ูพฺุฏูุ ุขุฑฺฏููุงู `meta_query` ุฑุง ุฏุฑ ฺฉูุงุณ `WP_Query` ูุฑุงูู ฺฉุฑุฏู ุงุณุช.

<div dir="ltr">

```php
$args = [
    'post_type' => 'product',
    'meta_query' => [
        'relation' => 'AND', // ุดููุฏ AND ุดุฑุทโูุง 
        [
            'key' => '_stock_status',
            'value' => 'instock',
            'compare' => '=',
        ],
        [
            'key' => '_price',
            'value' => [50, 100],
            'type' => 'NUMERIC', // ููู: ุจู ูุฑุฏูพุฑุณ ูโฺฏูู ฺฉู ููุฏุงุฑ ุฑุง ุจู ุนููุงู ุนุฏุฏ ููุงุณู ฺฉูุฏ
            'compare' => 'BETWEEN',
        ],
    ],
];
$products_query = new WP_Query($args);
```
</div>

ุงู ุฑูุด "ุงุณุชุงูุฏุงุฑุฏ ูุฑุฏูพุฑุณ" ุงุณุช. ูุฑุฏูพุฑุณ ุฏุฑ ูพุดุช ุตุญูู ุขู ฺฉูุฆุฑ ูพฺุฏู ุจุง ฺูุฏ `JOIN` ุฑุง ุชููุฏ ูโฺฉูุฏ. ุงู ุฑูุด ฺฉุงุฑ ุฑุง ุฑุงุญุช ูโฺฉูุฏุ ุงูุง ูุดฺฉู ุงุตู ุนููฺฉุฑุฏ ุฑุง ุจู ุทูุฑ ฺฉุงูู ุญู ููโฺฉูุฏ.

#### ุฑุงูโุญู ฒ: ุฌุฏุงูู ุณูุงุฑุด (Custom Tables) - ุฑุงูโุญู ุญุฑููโุง
ุจูุชุฑู ุฑุงูโุญู ุจุฑุง ุณุงุชโูุง ุจุฒุฑฺฏุ **ุฎุงุฑุฌ ฺฉุฑุฏู ุฏุงุฏูโูุง ฺฉูุฏ ู ูพุฑุชฺฉุฑุงุฑ ุงุฒ ุณุงุฎุชุงุฑ EAV** ู ูุฑุงุฑ ุฏุงุฏู ุขูโูุง ุฏุฑ ฺฉ ุฌุฏูู ุณูุงุฑุด ู ุณุงุฎุชุงุฑุงูุชู ุงุณุช.

**ููฺฉุงูุฑุณ** ุฏููุงู ููู ฺฉุงุฑ ุฑุง ุจุฑุง ุจูุจูุฏ ุนููฺฉุฑุฏ ุงูุฌุงู ูโุฏูุฏ. ุงู ูพูุงฺฏู ุฌุฏูู ุจู ูุงู `wc_product_meta_lookup` ุฏุงุฑุฏ ฺฉู ุฏุงุฏูโูุง ุญุงุช ูุญุตููุงุช ูุงููุฏ ููุชุ ููุฌูุฏ ู... ุฑุง ุฏุฑ ุณุชููโูุง ุงุฎุชุตุงุต ุจุง **ููุน ุฏุงุฏู ุตุญุญ** (`DECIMAL` ุจุฑุง ููุชุ `INT` ุจุฑุง ุชุนุฏุงุฏ) ุฐุฎุฑู ูโฺฉูุฏ.

**ูุจู (EAV):**
`wp_postmeta (post_id, meta_key, meta_value)`

**ุจุนุฏ (ุฌุฏูู ุณูุงุฑุด):**
`wc_product_meta_lookup (product_id, sku, price, stock_quantity, stock_status)`

ุจุง ุงู ฺฉุงุฑุ ฺฉูุฆุฑ ูพฺุฏู ูุจู ุจู ฺฉ ฺฉูุฆุฑ `SELECT` ุณุงุฏูุ ุณุฑุน ู ุจููู ุฑู ฺฉ ุฌุฏูู ุจุง ุงูุฏฺฉุณโูุง ููุงุณุจ ุชุจุฏู ูโุดูุฏ.

---

[โฉ ุฏุฑุณ ูุจู: ฺฉูุงุณ $wpdb](../03-wpdb-class/README.md) | [๐ผ ุจุงุฒฺฏุดุช ุจู ููุฑุณุช ูุตู](../README.md) | [๐ ูุดุงูุฏู ููููู ฺฉุฏ](examples.sql) | [ุฏุฑุณ ุจุนุฏ: Object Caching โช](../05-Object-Caching/README.md)

</div>
